(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-584659dc"],{"0196":function(e,t,n){var r=n("5a88"),o=n("bbf0");function i(e){this.mode=o.BYTE,this.data=r.from(e)}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=i},"0425":function(e,t){var n="[0-9]+",r="[A-Z $%*+\\-./:]+",o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");var i="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+")(?:.|[\r\n]))+";t.KANJI=new RegExp(o,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(i,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp(r,"g");var a=new RegExp("^"+o+"$"),s=new RegExp("^"+n+"$"),u=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return a.test(e)},t.testNumeric=function(e){return s.test(e)},t.testAlphanumeric=function(e){return u.test(e)}},"045f":function(e,t,n){var r=n("3421");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=n("499e").default;o("df114936",r,!0,{sourceMap:!1,shadowMode:!1})},"0af0":function(e,t,n){var r=n("6d8e");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=n("499e").default;o("5864c497",r,!0,{sourceMap:!1,shadowMode:!1})},"10b0":function(e,t,n){"use strict";var r={single_source_shortest_paths:function(e,t,n){var o={},i={};i[t]=0;var a,s,u,c,l,f,d,h,p,g=r.PriorityQueue.make();g.push(t,0);while(!g.empty())for(u in a=g.pop(),s=a.value,c=a.cost,l=e[s]||{},l)l.hasOwnProperty(u)&&(f=l[u],d=c+f,h=i[u],p="undefined"===typeof i[u],(p||h>d)&&(i[u]=d,g.push(u,d),o[u]=s));if("undefined"!==typeof n&&"undefined"===typeof i[n]){var v=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(v)}return o},extract_shortest_path_from_predecessor_list:function(e,t){var n=[],r=t;while(r)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var o=r.single_source_shortest_paths(e,t,n);return r.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(e){var t,n=r.PriorityQueue,o={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o.queue=[],o.sorter=e.sorter||n.default_sorter,o},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=r},"118a":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));n("96cf");var r=n("1da1"),o=n("bc3a"),i=n.n(o);function a(e){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="sss",e.next=3,u().then((function(e){n=e}));case 3:return e.abrupt("return",'<html>\n\n    <head>\n        <meta charset="UTF-8">\n        <title>\n        </title>\n        <meta name="viewport" id="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">\n        <meta content="yes" name="apple-mobile-web-app-capable">\n        <meta content="black" name="apple-mobile-web-app-status-bar-style">\n        <meta content="telephone=no" name="format-detection">\n        <meta content="email=no" name="format-detection">\n        <style>'+n+'</style>\n    <body style="margin:0px;padding:0px;" ontouchstart="clickthrough(event)" onmousedown="clickthrough(event)">\n    <script>\n            window.onload = function(){\n                window.setInterval(showMyAd, 400)\n                setTimeout(() => {\n                    window.clearInterval\n                    //n秒后关闭定时器\n                }, 3000);\n            }\n        <\/script>\n    <div id="preview" style="position:\'relative\'">'+t+"</div>\n     <button id=\"unmuteButton\"></button>\n    </body>\n    <script src=\"mraid.js\"><\/script>\n    <script>\n        function resetCSS(){\n            var preview = document.getElementById('preview');\n            preview.height            = \"100%\";\n            preview.width             = \"100%\";\n        }\n        function clickthrough(event){\n            event.preventDefault(); // so no both touch and click is registered\n\n            //安卓和ios链接跳转适配\n            var userAgent = navigator.userAgent || navigator.vendor;\n            var url = '此处用ios链接'; \n            var android ='此处用安卓链接'; \n            if (/android/i.test(userAgent)) { \n             url = android; \n            }\n            mraid.open(url);\n        }\n        window.onresize = function(event) {\n            resetCSS();\n        }\n        // Wait for the SDK to become ready\n        // console.log(mraid.getState())\n        if (mraid.getState() === 'loading') {\n         mraid.addEventListener('ready', onSdkReady);\n        } else {\n         onSdkReady();\n        }\n        function viewableChangeHandler(viewable) {\n         // start/pause/resume gameplay, stop/play sounds\n         if(viewable) {\n             //如果有视频文件的话，进行资源加载，如果没有视频文件的话就直接渲染\n             if(document.getElementsByTagName(\"video\")!=null)\n         showMyAd();\n         } else {\n        //  movie.pause();\n         }\n        }\n        \n        function onSdkReady() {\n         mraid.addEventListener('viewableChange', viewableChangeHandler);\n         // Wait for the ad to become viewable for the first time\n         //判断广告是否显示在了桌面上\n         if (mraid.isViewable()) {\n             //导入资源并渲染桌面\n         showMyAd();\n         }\n        }\n        function showMyAd() {\n            //展示视频\n\n            var movie = document.getElementsByTagName(\"video\");\n            var unmuteButton = document.getElementById(\"unmuteButton\")\n            for(let i = 0; i < movie; i ++){\n            // movie.load();\n            movie[i].play()\n            unmuteButton.style.display = 'none'\n            unmuteButton.addEventListener('click',()=>{\n                movie[i].muted = false\n            })\n            }\n            \n        }\n        <\/script>\n    </html>");case 4:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(){var e="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css?ver=4.8.14";return new Promise((function(t,n){i.a.get(e).then((function(e){t(e.data)}))}))}function c(e){var t=document.createElement("a");t.style.display="none",t.download="index.html",document.getElementsByClassName("adjust-tip")[0]&&(document.getElementsByClassName("adjust-tip")[0].style.display="none"),a(document.getElementById(e).innerHTML).then((function(e){var n=new Blob([e]);console.log(n),t.href=URL.createObjectURL(n),t.click()}))}},2732:function(e,t,n){var r=n("5a88"),o=n("699e");t.mul=function(e,t){for(var n=r.alloc(e.length+t.length-1),i=0;i<e.length;i++)for(var a=0;a<t.length;a++)n[i+a]^=o.mul(e[i],t[a]);return n},t.mod=function(e,t){var n=r.from(e);while(n.length-t.length>=0){for(var i=n[0],a=0;a<t.length;a++)n[a]^=o.mul(t[a],i);var s=0;while(s<n.length&&0===n[s])s++;n=n.slice(s)}return n},t.generateECPolynomial=function(e){for(var n=r.from([1]),i=0;i<e;i++)n=t.mul(n,[1,o.exp(i)]);return n}},"27a3":function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},"2dde":function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var r=n("ade3"),o=n("2f62"),i=(n("7f7f"),n("2909")),a=(n("28a5"),n("c30f"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={t:"n",b:"s",l:"w",r:"e"},l=["lt","rt","lb","rb","l","r","t","b"],f={mixins:[a["a"]],props:["defaultPosition","active","handleMousedownProp","handleElementMoveProp","handlePointMoveProp","handleElementMouseUpProp","handlePointMouseUpProp","element"],computed:{position:function(){return u({},this.defaultPosition)}},methods:{getPointStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.position,r=n.top,o=n.left,i=n.height,a=n.width,s=/t/.test(e),u=/b/.test(e),l=/l/.test(e),f=/r/.test(e),d=0,h=0;2===e.length?(d=l?0:a,h=s?0:i):((s||u)&&(d=a/2,h=s?0:i),(l||f)&&(d=l?0:a,h=i/2));var p={marginLeft:l||f?"-3px":0,marginTop:s||u?"-3px":0,left:"".concat(d+(t?0:o),"px"),top:"".concat(h+(t?0:r),"px"),cursor:e.split("").reverse().map((function(e){return c[e]})).join("")+"-resize"};return p},handleWrapperClick:function(e){e.stopPropagation(),e.preventDefault()},mousedownForMark:function(e,t){var n=this;t.stopPropagation(),t.preventDefault();var r=u({},this.position),o=r.height,i=r.width,a=r.top,s=r.left,c=t.clientX,l=t.clientY,f=function(t){var u=t.clientX,f=t.clientY,d=f-l,h=u-c,p=/t/.test(e),g=/b/.test(e),v=/l/.test(e),m=/r/.test(e),w=+o+(p?-d:g?d:0),b=+i+(v?-h:m?h:0);r.height=w>0?w:0,r.width=b>0?b:0,r.left=+s+(v?h:0),r.top=+a+(p?d:0),n.handlePointMoveProp(r)},d=function e(){n.handlePointMouseUpProp(),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",d)},mousedownForElement:function(e){var t=this,n=u({},this.position),r=e.clientY,o=e.clientX,i=n.top,a=n.left,s=function(e){e.stopPropagation(),e.preventDefault();var s=e.clientX,u=e.clientY;n.top=u-r+i,n.left=s-o+a,t.handleElementMoveProp(n)},c=function e(n){t.handleElementMouseUpProp(),document.removeEventListener("mousemove",s,!0),document.removeEventListener("mouseup",e,!0)};document.addEventListener("mousemove",s,!0),document.addEventListener("mouseup",c,!0)},handleMousedown:function(e){this.handleMousedownProp&&(this.handleMousedownProp(),this.mousedownForElement(e,this.element))},handleDeleteByKeyboard:function(e){var t=e.keyCode||e.charCode;8!==t&&46!==t||this.$emit("delete")},handleKeyPressed:function(e){this.handleDeleteByKeyboard(e)}},render:function(e){var t=this;return e("div",{attrs:{tabIndex:"0",width:"100%",height:"100%"},on:{keydown:this.handleKeyPressed,click:this.handleWrapperClick,mousedown:this.handleMousedown},class:{"shape__wrapper-active":this.active}},[this.active&&l.map((function(n){var r=t.getPointStyle(n);return e("div",{key:n,attrs:{"data-point":n},style:r,class:"shape__scale-point",on:{mousedown:t.mousedownForMark.bind(t,n)}})})),this.$slots.default])}};n("6762"),n("2fdb"),n("3b2b"),n("045f");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){return e instanceof RegExp}var g=[{i18nLabel:"editor.centerPanel.contextMenu.copy",label:"复制",value:"copy"},{i18nLabel:"editor.centerPanel.contextMenu.delete",label:"删除",value:"delete"},{i18nLabel:"editor.centerPanel.contextMenu.showOnlyButton",label:"showOnlyButton",value:"showOnlyButton",elementWhiteList:["lbp-button"]},{i18nLabel:"editor.centerPanel.contextMenu.showExcludePicture",label:"showExcludePicture",value:"showExcludePicture",elementBlackList:/^lbp-picture/}],v=[{i18nLabel:"editor.centerPanel.contextMenu.moveToTop",label:"置顶",value:"move2Top"},{i18nLabel:"editor.centerPanel.contextMenu.moveToBottom",label:"置底",value:"move2Bottom"},{i18nLabel:"editor.centerPanel.contextMenu.moveUp",label:"上移",value:"addZindex"},{i18nLabel:"editor.centerPanel.contextMenu.moveDown",label:"下移",value:"minusZindex"}],m={computed:h(h({},Object(o["c"])("editor",["editingElement","work"])),{},{filteredOptions:function(){var e=this.editingElement.name,t=g.filter((function(t){var n=t.elementWhiteList,r=t.elementBlackList;if(n){if(Array.isArray(n))return n.includes(e);if(p(n))return n.test(e)}if(r){if(Array.isArray(r))return!r.includes(e);if(p(r))return!r.test(e)}return!0}));return t}}),props:{position:{type:Array,default:function(){return[]}}},methods:{handleSelectMenu:function(e){var t=e.item,n=e.key,r=e.selectedKeys;this.$emit("select",{item:t,key:n,selectedKeys:r})}},render:function(e){var t=this;return e("a-card",{attrs:{bodyStyle:{padding:"4px"}},class:"contextmenu"},[e("a-menu",{attrs:{inlineIndent:4,mode:"inline"},on:{select:this.handleSelectMenu},class:"contextmenu__vertical-menus"},[this.filteredOptions.map((function(n){return e("a-menu-item",{key:n.value,attrs:{"data-command":n.value},class:"contextmenu__vertical-menus__item"},[t.$t(n.i18nLabel)])}))]),e("a-menu",{attrs:{mode:"horizontal"},on:{select:this.handleSelectMenu},class:"contextmenu__horizontal-menus"},[v.map((function(n){return e("a-menu-item",{key:n.value,attrs:{"data-command":n.value},class:"contextmenu__horizontal-menus__item"},[t.$t(n.i18nLabel)])}))])])}};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={props:["elements","handleClickElementProp","handleClickCanvasProp"],data:function(){return{vLines:[],hLines:[],contextmenuPos:[]}},computed:b({},Object(o["c"])("editor",["editingElement","work"])),methods:b(b({},Object(o["b"])("editor",["setEditingElement","setElementPosition","setElementShape","recordElementRect","elementManager","updateWork"])),{},{drawVLine:function(e){this.vLines=[{left:e}]},clearVLine:function(){this.vLines=[]},drawHLine:function(e){this.hLines=[{top:e}]},clearHLine:function(){this.hLines=[]},calcVHLine:function(e){var t=this,n=this.editingElement.uuid,r=this.elements.filter((function(e){return e.uuid!==n})),o=[],a=[];r.forEach((function(e){var t=e.commonStyle.width,n=e.commonStyle.left,r=e.commonStyle.height,s=e.commonStyle.top;o=[].concat(Object(i["a"])(o),[n,n+t/2,n+t]),a=[].concat(Object(i["a"])(a),[s,s+r/2,s+r])}));var s=this.editingElement.commonStyle.left,u=this.editingElement.commonStyle.top,c=this.editingElement.commonStyle.width,l=this.editingElement.commonStyle.height,f=[s+c,s+c/2,s],d=[u+l,u+l/2,u],h=!1,p=!1;f.forEach((function(n){o.forEach((function(r){var o=r-n;Math.abs(o)<=5&&(e?t.setElementPosition({width:c+o}):t.setElementPosition({left:s+o}),t.drawVLine(r),h=!0)}))})),d.forEach((function(n){a.forEach((function(r){var o=r-n;Math.abs(o)<=5&&(e?t.setElementPosition({height:l+o}):t.setElementPosition({top:u+o}),t.drawHLine(r),p=!0)}))})),h||this.clearVLine(),p||this.clearHLine()},handleElementMove:function(e){this.setElementPosition(e),this.calcVHLine(!1)},handlePointMove:function(e){this.setElementPosition(e),this.calcVHLine(!0)},bindContextMenu:function(e){var t=this.$el.getBoundingClientRect(),n=t.x,r=t.y;this.contextmenuPos=[e.clientX-n,e.clientY-r]},hideContextMenu:function(){this.contextmenuPos=[]},handleClickCanvas:function(e){e.target.classList.contains("element-on-edit-canvas")||this.setEditingElement()},updateWorkHeight:function(e){this.updateWork({height:e})},mousedownForAdjustLine:function(e){var t=this,n=e.clientY,r=this.work.height,o=document.querySelector("#canvas-outer-wrapper"),i=function(e){e.stopPropagation(),e.preventDefault();var i=e.clientY,a=i-n+r;t.updateWorkHeight(a),o&&(o.scrollTop=o.scrollHeight)},a=function e(t){document.removeEventListener("mousemove",i,!0),document.removeEventListener("mouseup",e,!0)};document.addEventListener("mousemove",i,!0),document.addEventListener("mouseup",a,!0)},renderCanvas:function(e,t){var n=this;return e("div",{style:{height:"100%",position:"relative"},on:{click:function(e){n.hideContextMenu(),n.handleClickCanvas(e)},contextmenu:function(e){e.preventDefault(),e.stopPropagation()}}},[t.map((function(t,r){if("lbp-background"===t.name)return e("lbp-background",{props:t.getProps()});var o={style:{width:"100%",height:"100%"},class:"element-on-edit-canvas",props:b(b({},t.getProps()),{},{editorMode:"edit"}),on:{input:function(e){var n=e.value,r=e.pluginName;"lbp-text"===r&&(t.pluginProps.text=n)}}};return e(f,{on:{delete:function(){return n.elementManager({type:"delete"})}},style:t.getStyle({position:"absolute"}),attrs:{defaultPosition:t.commonStyle,element:t,active:n.editingElement===t,handleMousedownProp:function(){n.hideContextMenu(),n.setEditingElement(t)},handlePointMoveProp:n.handlePointMove,handleElementMoveProp:n.handleElementMove,handleElementMouseUpProp:function(){n.clearHLine(),n.clearVLine(),n.recordElementRect()},handlePointMouseUpProp:function(){n.clearHLine(),n.clearVLine(),n.recordElementRect()}},nativeOn:{contextmenu:function(e){n.bindContextMenu(e)}}},[e(t.name,o)])})),this.vLines.map((function(t){return e("div",{class:"v-line",style:{left:"".concat(t.left,"px")}})})),this.hLines.map((function(t){return e("div",{class:"h-line",style:{top:"".concat(t.top,"px")}})})),this.contextmenuPos.length?e(m,{style:{left:this.contextmenuPos[0]+"px",top:this.contextmenuPos[1]+"px",userSelect:"none",position:"absolute",zIndex:999},on:{select:function(e){e.item;var t=e.key;e.selectedKeys;n.elementManager({type:t}),n.hideContextMenu()},hideMenu:this.hideContextMenu}}):null,e("div",{style:{position:"absolute",top:"".concat(this.work.height,"px"),width:"100%"}},[e("div",{class:"adjust-line-wrapper adjust-line-wrapper-h"},[e("div",{class:"adjust-line adjust-line-h"}),e("div",{class:"adjust-button",on:{mousedown:this.mousedownForAdjustLine}},[e("div",{class:"indicator"})]),e("div",{class:"adjust-tip"},[e("span",["320 x"]),e("a-input-number",{attrs:{size:"small",value:this.work.height},style:"margin: 0 4px; width:60px;",on:{change:function(e){n.updateWork({height:e})}}}),e("span",["px"])])])])])}}),render:function(e){return this.renderCanvas(e,this.elements)}},E=n("82c3"),P=n("118a");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t["a"]={name:"EditorCanvas",data:function(){return{isPreviewMode:!1,visible:!1,page:[]}},computed:M(M({},Object(o["c"])("editor",{editingPage:function(e){return e.editingPage},editingElement:function(e){return e.editingElement},elements:function(e){return e.editingPage.elements},pages:function(e){return e.work.pages},work:function(e){return e.work},scaleRate:function(e){return e.scaleRate}})),Object(o["c"])("loading",["saveWork_loading","previewWork_loading","setWorkAsTemplate_loading","uploadWorkCover_loading"])),methods:M(M({},Object(o["b"])("editor",["elementManager","pageManager","saveWork","createWork","fetchWork","updateWork","setWorkAsTemplate","setEditingElement","setEditingPage"])),{},{handleSave:function(){this.saveWork({isSaveCover:!0}),Object(P["b"])("preview")},handleToggleMode:function(e){this.isPreviewMode=e,e&&this.setEditingElement()}}),render:function(e){return e("a-layout",{attrs:{id:"canvas-outer-wrapper"}},[e("div",{style:{display:"none"}},[e("div",{attrs:{id:"preview"}},[this.work.pages.map((function(t){return e(E["a"],{attrs:{elements:t.elements},style:{height:"100%"}})}))])]),e("a-button",{attrs:{size:"small"},on:{click:this.handleSave},style:{width:"100px",height:"50px",position:"absolute",right:"470px",top:"125px",zIndex:"1000"}},["下载"]),e("a-radio-group",{style:{position:"absolute"},class:"mode-toggle-wrapper",attrs:{size:"small",value:this.isPreviewMode},on:{input:this.handleToggleMode}},[e("a-radio-button",{attrs:{label:!1,value:!1}},[this.$t("editor.centerPanel.mode.edit")]),e("a-radio-button",{attrs:{label:!0,value:!0}},[this.$t("editor.centerPanel.mode.preview")])]),e("a-layout-content",{style:{transform:"scale(".concat(this.scaleRate,")"),"transform-origin":"center top"}},[e("div",{class:"canvas-wrapper",style:{height:"".concat(this.work.height,"px")}},[this.isPreviewMode?e(E["a"],{attrs:{id:"preview",elements:this.elements}}):e(y,{attrs:{id:"preview",elements:this.elements},class:"edit-mode"})])])])}}},"2f3a":function(e,t,n){var r=n("bbf0"),o=n("7bf0");function i(e){this.mode=r.KANJI,this.data=e}i.getBitsLength=function(e){return 13*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=o.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=i},3421:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".contextmenu__horizontal-menus{height:32px;line-height:32px;border:none;border-top:1px solid #eee}.contextmenu__horizontal-menus__item{padding:0 4px 4px}.contextmenu__vertical-menus{border:none}.contextmenu__vertical-menus__item{height:22px!important;line-height:22px!important;margin:0}",""])},"34fc":function(e,t,n){var r=n("7a43"),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}}},"3b2b":function(e,t,n){var r=n("7726"),o=n("5dbc"),i=n("86cc").f,a=n("9093").f,s=n("aae3"),u=n("0bfb"),c=r.RegExp,l=c,f=c.prototype,d=/a/g,h=/a/g,p=new c(d)!==d;if(n("9e1e")&&(!p||n("79e5")((function(){return h[n("2b4c")("match")]=!1,c(d)!=d||c(h)==h||"/a/i"!=c(d,"i")})))){c=function(e,t){var n=this instanceof c,r=s(e),i=void 0===t;return!n&&r&&e.constructor===c&&i?e:o(p?new l(r&&!i?e.source:e,t):l((r=e instanceof c)?e.source:e,r&&i?u.call(e):t),n?this:f,c)};for(var g=function(e){e in c||i(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},v=a(l),m=0;v.length>m;)g(v[m++]);f.constructor=c,c.prototype=f,n("2aba")(r,"RegExp",c)}n("7a56")("RegExp")},4006:function(e,t,n){var r=n("45be");function o(e,t){var n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function i(e,t,n){var r=e+t;return"undefined"!==typeof n&&(r+=" "+n),r}function a(e,t,n){for(var r="",o=0,a=!1,s=0,u=0;u<e.length;u++){var c=Math.floor(u%t),l=Math.floor(u/t);c||a||(a=!0),e[u]?(s++,u>0&&c>0&&e[u-1]||(r+=a?i("M",c+n,.5+l+n):i("m",o,0),o=0,a=!1),c+1<t&&e[u+1]||(r+=i("h",s),s=0)):o++}return r}t.render=function(e,t,n){var i=r.getOptions(t),s=e.modules.size,u=e.modules.data,c=s+2*i.margin,l=i.color.light.a?"<path "+o(i.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",f="<path "+o(i.color.dark,"stroke")+' d="'+a(u,s,i.margin)+'"/>',d='viewBox="0 0 '+c+" "+c+'"',h=i.width?'width="'+i.width+'" height="'+i.width+'" ':"",p='<svg xmlns="http://www.w3.org/2000/svg" '+h+d+' shape-rendering="crispEdges">'+l+f+"</svg>\n";return"function"===typeof n&&n(null,p),p}},4146:function(e,t,n){var r=n("45be");function o(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}function i(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}t.render=function(e,t,n){var a=n,s=t;"undefined"!==typeof a||t&&t.getContext||(a=t,t=void 0),t||(s=i()),a=r.getOptions(a);var u=r.getImageWidth(e.modules.size,a),c=s.getContext("2d"),l=c.createImageData(u,u);return r.qrToImageData(l.data,e,a),o(c,s,u),c.putImageData(l,0,0),s},t.renderToDataURL=function(e,n,r){var o=r;"undefined"!==typeof o||n&&n.getContext||(o=n,n=void 0),o||(o={});var i=t.render(e,n,o),a=o.type||"image/png",s=o.rendererOpts||{};return i.toDataURL(a,s.quality)}},"45be":function(e,t){function n(e){if("number"===typeof e&&(e=e.toString()),"string"!==typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t="undefined"===typeof e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,o=e.scale||4;return{width:r,scale:r?4:o,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){var r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){for(var o=n.modules.size,i=n.modules.data,a=t.getScale(o,r),s=Math.floor((o+2*r.margin)*a),u=r.margin*a,c=[r.color.light,r.color.dark],l=0;l<s;l++)for(var f=0;f<s;f++){var d=4*(l*s+f),h=r.color.light;if(l>=u&&f>=u&&l<s-u&&f<s-u){var p=Math.floor((l-u)/a),g=Math.floor((f-u)/a);h=c[i[p*o+g]?1:0]}e[d++]=h.r,e[d++]=h.g,e[d++]=h.b,e[d]=h.a}}},"577e":function(e,t,n){var r=n("5a88");function o(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=r.alloc(e*e),this.reservedBit=r.alloc(e*e)}o.prototype.set=function(e,t,n,r){var o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)},o.prototype.get=function(e,t){return this.data[e*this.size+t]},o.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},o.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=o},"5a88":function(e,t,n){"use strict";var r=n("eee5");function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}a.TYPED_ARRAY_SUPPORT=o();var i=a.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function a(e,t,n){return a.TYPED_ARRAY_SUPPORT||this instanceof a?"number"===typeof e?l(this,e):b(this,e,t,n):new a(e,t,n)}function s(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function u(e){return e!==e}function c(e,t){var n;return a.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(t),n.__proto__=a.prototype):(n=e,null===n&&(n=new a(t)),n.length=t),n}function l(e,t){var n=c(e,t<0?0:0|s(t));if(!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)n[r]=0;return n}function f(e,t){var n=0|v(t),r=c(e,n),o=r.write(t);return o!==n&&(r=r.slice(0,o)),r}function d(e,t){for(var n=t.length<0?0:0|s(t.length),r=c(e,n),o=0;o<n;o+=1)r[o]=255&t[o];return r}function h(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");var o;return o=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?o.__proto__=a.prototype:o=d(e,o),o}function p(e,t){if(a.isBuffer(t)){var n=0|s(t.length),r=c(e,n);return 0===r.length||t.copy(r,0,0,n),r}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||u(t.length)?c(e,0):d(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function v(e){if(a.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var t=e.length;return 0===t?0:g(e).length}function m(e,t,n,r){for(var o=0;o<r;++o){if(o+n>=t.length||o>=e.length)break;t[o+n]=e[o]}return o}function w(e,t,n,r){return m(g(t,e.length-n),e,n,r)}function b(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"===typeof t?f(e,t,n):p(e,t)}a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),a.prototype.write=function(e,t,n){void 0===t||void 0===n&&"string"===typeof t?(n=this.length,t=0):isFinite(t)&&(t|=0,isFinite(n)?n|=0:n=void 0);var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return w(this,e,t,n)},a.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),a.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=a.prototype;else{var o=t-e;n=new a(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!a.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},a.prototype.fill=function(e,t,n){if("string"===typeof e){if("string"===typeof t?(t=0,n=this.length):"string"===typeof n&&(n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var i=a.isBuffer(e)?e:new a(e),s=i.length;for(o=0;o<n-t;++o)this[o+t]=i[o%s]}return this},a.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c(null,0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=l(null,t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,i),i+=s.length}return o},a.byteLength=v,a.prototype._isBuffer=!0,a.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.exports.alloc=function(e){var t=new a(e);return t.fill(0),t},e.exports.from=function(e){return new a(e)}},"67dd":function(e,t){e.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},"699e":function(e,t,n){var r=n("5a88"),o=r.alloc(512),i=r.alloc(256);(function(){for(var e=1,t=0;t<255;t++)o[t]=e,i[e]=t,e<<=1,256&e&&(e^=285);for(t=255;t<512;t++)o[t]=o[t-255]})(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return i[e]},t.exp=function(e){return o[e]},t.mul=function(e,t){return 0===e||0===t?0:o[i[e]+i[t]]}},"6d8e":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".preview-wrapper{position:relative;min-height:480px}.preview-wrapper .phone-wrapper,.preview-wrapper .phone-wrapper .phone{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box}.preview-wrapper .phone-wrapper .phone{width:320px;height:568px;display:inline-block;background:#fff;border-top:10px solid #f6f6f6;border-left:10px solid #f6f6f6;border-right:10px solid #f6f6f6;border-bottom:20px solid #f6f6f6;border-radius:20px;-webkit-transform-origin:100% 0;transform-origin:100% 0;-webkit-transform:scale(1);transform:scale(1)}.preview-wrapper .phone-wrapper .phone .float-ctrl-panel{position:absolute;top:100px;right:-40px}.preview-wrapper .phone-wrapper .phone .float-ctrl-panel .page-controller{display:block;cursor:pointer;width:30px;height:80px;border-top-right-radius:5px;border-bottom-right-radius:5px;background:#2096f9;font-size:12px;text-align:center;border:1px solid #2096f9;color:#fff;padding:14px 8px;margin-top:12px}.preview-wrapper .setting{color:#4a4a4a;font-size:14px;float:right;width:380px}.preview-wrapper .setting .info .input{margin-top:10px}.preview-wrapper .setting .qrcode{margin-top:20px}.preview-wrapper .setting .qrcode .label span{margin-right:10px}.preview-wrapper .setting .code{overflow:hidden}.preview-wrapper .setting .code .radios{width:80px;margin-top:5px;margin-left:30px}.preview-wrapper .setting .code .radios label{margin-left:0;margin-top:10px}.preview-wrapper .setting .code .radios button{margin-top:15px}.preview-wrapper .setting .link{width:100%;display:block}.preview-wrapper .setting .edit{text-align:center;margin-top:20px}",""])},"78c4":function(e,t,n){"use strict";var r=n("0af0"),o=n.n(r);o.a},7903:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var n={N1:3,N2:3,N3:40,N4:10};function r(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,r=0,o=0,i=0,a=null,s=null,u=0;u<t;u++){o=i=0,a=s=null;for(var c=0;c<t;c++){var l=e.get(u,c);l===a?o++:(o>=5&&(r+=n.N1+(o-5)),a=l,o=1),l=e.get(c,u),l===s?i++:(i>=5&&(r+=n.N1+(i-5)),s=l,i=1)}o>=5&&(r+=n.N1+(o-5)),i>=5&&(r+=n.N1+(i-5))}return r},t.getPenaltyN2=function(e){for(var t=e.size,r=0,o=0;o<t-1;o++)for(var i=0;i<t-1;i++){var a=e.get(o,i)+e.get(o,i+1)+e.get(o+1,i)+e.get(o+1,i+1);4!==a&&0!==a||r++}return r*n.N2},t.getPenaltyN3=function(e){for(var t=e.size,r=0,o=0,i=0,a=0;a<t;a++){o=i=0;for(var s=0;s<t;s++)o=o<<1&2047|e.get(a,s),s>=10&&(1488===o||93===o)&&r++,i=i<<1&2047|e.get(s,a),s>=10&&(1488===i||93===i)&&r++}return r*n.N3},t.getPenaltyN4=function(e){for(var t=0,r=e.data.length,o=0;o<r;o++)t+=e.data[o];var i=Math.abs(Math.ceil(100*t/r/5)-10);return i*n.N4},t.applyMask=function(e,t){for(var n=t.size,o=0;o<n;o++)for(var i=0;i<n;i++)t.isReserved(i,o)||t.xor(i,o,r(e,i,o))},t.getBestMask=function(e,n){for(var r=Object.keys(t.Patterns).length,o=0,i=1/0,a=0;a<r;a++){n(a),t.applyMask(a,e);var s=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(a,e),s<i&&(i=s,o=a)}return o}},"7a43":function(e,t){function n(e){if("string"!==typeof e)throw new Error("Param is not a string");var n=e.toLowerCase();switch(n){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&"undefined"!==typeof e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,r){if(t.isValid(e))return e;try{return n(e)}catch(o){return r}}},"7ba0":function(e,t){function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){var t=Math.floor(e/8);return 1===(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1===(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=n},"7bf0":function(e,t){var n,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){var t=0;while(0!==e)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!==typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return"undefined"!==typeof n},t.toSJIS=function(e){return n(e)}},"8d23":function(e,t,n){var r=n("5a88"),o=n("2732"),i=n("1c35").Buffer;function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=o.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=r.alloc(this.degree),n=i.concat([e,t],e.length+this.degree),a=o.mod(n,this.genPoly),s=this.degree-a.length;if(s>0){var u=r.alloc(this.degree);return a.copy(u,s),u}return a},e.exports=a},"924f":function(e,t,n){var r=n("7bf0").getSymbolSize,o=7;t.getPositions=function(e){var t=r(e);return[[0,0],[t-o,0],[0,t-o]]}},9582:function(e,t,n){var r=n("7bf0"),o=1335,i=21522,a=r.getBCHDigit(o);t.getEncodedBits=function(e,t){var n=e.bit<<3|t,s=n<<10;while(r.getBCHDigit(s)-a>=0)s^=o<<r.getBCHDigit(s)-a;return(n<<10|s)^i}},"9d94":function(e,t,n){var r=n("bbf0"),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=r.ALPHANUMERIC,this.data=e}i.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*o.indexOf(this.data[t]);n+=o.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(o.indexOf(this.data[t]),6)},e.exports=i},aa63:function(e,t,n){var r=n("5a88"),o=n("7bf0"),i=n("7a43"),a=n("7ba0"),s=n("577e"),u=n("d6c0"),c=n("924f"),l=n("7903"),f=n("34fc"),d=n("8d23"),h=n("c8aa"),p=n("9582"),g=n("bbf0"),v=n("befa"),m=n("eee5");function w(e,t){for(var n=e.size,r=c.getPositions(t),o=0;o<r.length;o++)for(var i=r[o][0],a=r[o][1],s=-1;s<=7;s++)if(!(i+s<=-1||n<=i+s))for(var u=-1;u<=7;u++)a+u<=-1||n<=a+u||(s>=0&&s<=6&&(0===u||6===u)||u>=0&&u<=6&&(0===s||6===s)||s>=2&&s<=4&&u>=2&&u<=4?e.set(i+s,a+u,!0,!0):e.set(i+s,a+u,!1,!0))}function b(e){for(var t=e.size,n=8;n<t-8;n++){var r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function y(e,t){for(var n=u.getPositions(t),r=0;r<n.length;r++)for(var o=n[r][0],i=n[r][1],a=-2;a<=2;a++)for(var s=-2;s<=2;s++)-2===a||2===a||-2===s||2===s||0===a&&0===s?e.set(o+a,i+s,!0,!0):e.set(o+a,i+s,!1,!0)}function E(e,t){for(var n,r,o,i=e.size,a=h.getEncodedBits(t),s=0;s<18;s++)n=Math.floor(s/3),r=s%3+i-8-3,o=1===(a>>s&1),e.set(n,r,o,!0),e.set(r,n,o,!0)}function P(e,t,n){var r,o,i=e.size,a=p.getEncodedBits(t,n);for(r=0;r<15;r++)o=1===(a>>r&1),r<6?e.set(r,8,o,!0):r<8?e.set(r+1,8,o,!0):e.set(i-15+r,8,o,!0),r<8?e.set(8,i-r-1,o,!0):r<9?e.set(8,15-r-1+1,o,!0):e.set(8,15-r-1,o,!0);e.set(i-8,8,1,!0)}function x(e,t){for(var n=e.size,r=-1,o=n-1,i=7,a=0,s=n-1;s>0;s-=2){6===s&&s--;while(1){for(var u=0;u<2;u++)if(!e.isReserved(o,s-u)){var c=!1;a<t.length&&(c=1===(t[a]>>>i&1)),e.set(o,s-u,c),i--,-1===i&&(a++,i=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}}function M(e,t,n){var r=new a;n.forEach((function(t){r.put(t.mode.bit,4),r.put(t.getLength(),g.getCharCountIndicator(t.mode,e)),t.write(r)}));var i=o.getSymbolTotalCodewords(e),s=f.getTotalCodewordsCount(e,t),u=8*(i-s);r.getLengthInBits()+4<=u&&r.put(0,4);while(r.getLengthInBits()%8!==0)r.putBit(0);for(var c=(u-r.getLengthInBits())/8,l=0;l<c;l++)r.put(l%2?17:236,8);return A(r,e,t)}function A(e,t,n){for(var i=o.getSymbolTotalCodewords(t),a=f.getTotalCodewordsCount(t,n),s=i-a,u=f.getBlocksCount(t,n),c=i%u,l=u-c,h=Math.floor(i/u),p=Math.floor(s/u),g=p+1,v=h-p,m=new d(v),w=0,b=new Array(u),y=new Array(u),E=0,P=r.from(e.buffer),x=0;x<u;x++){var M=x<l?p:g;b[x]=P.slice(w,w+M),y[x]=m.encode(b[x]),w+=M,E=Math.max(E,M)}var A,k,B=r.alloc(i),O=0;for(A=0;A<E;A++)for(k=0;k<u;k++)A<b[k].length&&(B[O++]=b[k][A]);for(A=0;A<v;A++)for(k=0;k<u;k++)B[O++]=y[k][A];return B}function k(e,t,n,r){var i;if(m(e))i=v.fromArray(e);else{if("string"!==typeof e)throw new Error("Invalid data");var a=t;if(!a){var u=v.rawSplit(e);a=h.getBestVersionForData(u,n)}i=v.fromString(e,a||40)}var c=h.getBestVersionForData(i,n);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<c)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+c+".\n")}else t=c;var f=M(t,n,i),d=o.getSymbolSize(t),p=new s(d);return w(p,t),b(p),y(p,t),P(p,n,0),t>=7&&E(p,t),x(p,f),isNaN(r)&&(r=l.getBestMask(p,P.bind(null,p,n))),l.applyMask(r,p),P(p,n,r),{modules:p,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}t.create=function(e,t){if("undefined"===typeof e||""===e)throw new Error("No input text");var n,r,a=i.M;return"undefined"!==typeof t&&(a=i.from(t.errorCorrectionLevel,i.M),n=h.from(t.version),r=l.from(t.maskPattern),t.toSJISFunc&&o.setToSJISFunction(t.toSJISFunc)),k(e,n,a,r)}},bbf0:function(e,t,n){var r=n("27a3"),o=n("0425");function i(e){if("string"!==typeof e)throw new Error("Param is not a string");var n=e.toLowerCase();switch(n){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return o.testNumeric(e)?t.NUMERIC:o.testAlphanumeric(e)?t.ALPHANUMERIC:o.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return i(e)}catch(r){return n}}},befa:function(e,t,n){var r=n("bbf0"),o=n("dd7e"),i=n("9d94"),a=n("0196"),s=n("2f3a"),u=n("0425"),c=n("7bf0"),l=n("10b0");function f(e){return unescape(encodeURIComponent(e)).length}function d(e,t,n){var r,o=[];while(null!==(r=e.exec(n)))o.push({data:r[0],index:r.index,mode:t,length:r[0].length});return o}function h(e){var t,n,o=d(u.NUMERIC,r.NUMERIC,e),i=d(u.ALPHANUMERIC,r.ALPHANUMERIC,e);c.isKanjiModeEnabled()?(t=d(u.BYTE,r.BYTE,e),n=d(u.KANJI,r.KANJI,e)):(t=d(u.BYTE_KANJI,r.BYTE,e),n=[]);var a=o.concat(i,t,n);return a.sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function p(e,t){switch(t){case r.NUMERIC:return o.getBitsLength(e);case r.ALPHANUMERIC:return i.getBitsLength(e);case r.KANJI:return s.getBitsLength(e);case r.BYTE:return a.getBitsLength(e)}}function g(e){return e.reduce((function(e,t){var n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}function v(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];switch(o.mode){case r.NUMERIC:t.push([o,{data:o.data,mode:r.ALPHANUMERIC,length:o.length},{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.ALPHANUMERIC:t.push([o,{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.KANJI:t.push([o,{data:o.data,mode:r.BYTE,length:f(o.data)}]);break;case r.BYTE:t.push([{data:o.data,mode:r.BYTE,length:f(o.data)}])}}return t}function m(e,t){for(var n={},o={start:{}},i=["start"],a=0;a<e.length;a++){for(var s=e[a],u=[],c=0;c<s.length;c++){var l=s[c],f=""+a+c;u.push(f),n[f]={node:l,lastCount:0},o[f]={};for(var d=0;d<i.length;d++){var h=i[d];n[h]&&n[h].node.mode===l.mode?(o[h][f]=p(n[h].lastCount+l.length,l.mode)-p(n[h].lastCount,l.mode),n[h].lastCount+=l.length):(n[h]&&(n[h].lastCount=l.length),o[h][f]=p(l.length,l.mode)+4+r.getCharCountIndicator(l.mode,t))}}i=u}for(d=0;d<i.length;d++)o[i[d]]["end"]=0;return{map:o,table:n}}function w(e,t){var n,u=r.getBestModeForData(e);if(n=r.from(t,u),n!==r.BYTE&&n.bit<u.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(u));switch(n!==r.KANJI||c.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new o(e);case r.ALPHANUMERIC:return new i(e);case r.KANJI:return new s(e);case r.BYTE:return new a(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"===typeof t?e.push(w(t,null)):t.data&&e.push(w(t.data,t.mode)),e}),[])},t.fromString=function(e,n){for(var r=h(e,c.isKanjiModeEnabled()),o=v(r),i=m(o,n),a=l.find_path(i.map,"start","end"),s=[],u=1;u<a.length-1;u++)s.push(i.table[a[u]].node);return t.fromArray(g(s))},t.rawSplit=function(e){return t.fromArray(h(e,c.isKanjiModeEnabled()))}},c8aa:function(e,t,n){var r=n("7bf0"),o=n("34fc"),i=n("7a43"),a=n("bbf0"),s=n("27a3"),u=n("eee5"),c=7973,l=r.getBCHDigit(c);function f(e,n,r){for(var o=1;o<=40;o++)if(n<=t.getCapacity(o,r,e))return o}function d(e,t){return a.getCharCountIndicator(e,t)+4}function h(e,t){var n=0;return e.forEach((function(e){var r=d(e.mode,t);n+=r+e.getBitsLength()})),n}function p(e,n){for(var r=1;r<=40;r++){var o=h(e,r);if(o<=t.getCapacity(r,n,a.MIXED))return r}}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!s.isValid(e))throw new Error("Invalid QR Code version");"undefined"===typeof n&&(n=a.BYTE);var i=r.getSymbolTotalCodewords(e),u=o.getTotalCodewordsCount(e,t),c=8*(i-u);if(n===a.MIXED)return c;var l=c-d(n,e);switch(n){case a.NUMERIC:return Math.floor(l/10*3);case a.ALPHANUMERIC:return Math.floor(l/11*2);case a.KANJI:return Math.floor(l/13);case a.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,t){var n,r=i.from(t,i.M);if(u(e)){if(e.length>1)return p(e,r);if(0===e.length)return 1;n=e[0]}else n=e;return f(n.mode,n.getLength(),r)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");var t=e<<12;while(r.getBCHDigit(t)-l>=0)t^=c<<r.getBCHDigit(t)-l;return e<<12|t}},d055:function(e,t,n){var r=n("67dd"),o=n("aa63"),i=n("4146"),a=n("4006");function s(e,t,n,i,a){var s=[].slice.call(arguments,1),u=s.length,c="function"===typeof s[u-1];if(!c&&!r())throw new Error("Callback required as last argument");if(!c){if(u<1)throw new Error("Too few arguments provided");return 1===u?(n=t,t=i=void 0):2!==u||t.getContext||(i=n,n=t,t=void 0),new Promise((function(r,a){try{var s=o.create(n,i);r(e(s,t,i))}catch(u){a(u)}}))}if(u<2)throw new Error("Too few arguments provided");2===u?(a=n,n=t,t=i=void 0):3===u&&(t.getContext&&"undefined"===typeof a?(a=i,i=void 0):(a=i,i=n,n=t,t=void 0));try{var l=o.create(n,i);a(null,e(l,t,i))}catch(f){a(f)}}t.create=o.create,t.toCanvas=s.bind(null,i.render),t.toDataURL=s.bind(null,i.renderToDataURL),t.toString=s.bind(null,(function(e,t,n){return a.render(e,n)}))},d3b5:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var r=n("ade3"),o=n("2f62"),i=n("d055"),a=n.n(i);n("2dde");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c,l,f={props:{visible:{type:Boolean,default:!1},handleClose:{type:Function,default:function(){}},work:{type:Object,default:function(){}}},computed:{releaseUrl:function(){return"".concat(window.location.origin,"/works/preview/").concat(this.work.id,"?view_mode=preview")}},data:function(){return{confirmLoading:!1,qrcodeSize:500}},watch:{visible:function(e){var t=this;e&&this.$nextTick((function(){return t.drawQRcode()}))}},methods:u(u({},Object(o["b"])("editor",["saveWork","updateWork"])),{},{handleOk:function(e){var t=this;this.confirmLoading=!0,this.saveWork().then((function(e){t.handleClose(),t.confirmLoading=!1}))},handleCancel:function(e){console.log("Clicked cancel button"),this.handleClose()},drawQRcode:function(){var e=document.getElementById("qrcode-container");a.a.toCanvas(e,this.releaseUrl,{scale:4},(function(e){console.log(e)}))},postMessage2Iframe:function(e){var t=document.getElementById("iframe-for-preview").contentWindow;t.postMessage(e,window.location.origin)},openNewTab:function(e){switch(e){case"openPreviewPage":window.open(this.releaseUrl);break;case"buildEngineDocs":window.open("https://ly525.github.io/luban-h5/zh/getting-started/quick-start.html#_2-%E6%9E%84%E5%BB%BA%E9%A2%84%E8%A7%88%E6%89%80%E9%9C%80%E7%9A%84%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E");break}},saveAsHtml:function(){}}),render:function(e){var t=this;return e("a-modal",{attrs:{visible:this.visible,confirmLoading:this.confirmLoading,width:"70%",okText:"保存"},on:{ok:this.handleOk,cancel:this.handleCancel}},[e("div",{class:"preview-wrapper"},[e("a-row",{attrs:{gutter:20}},[e("a-col",{attrs:{span:8}},[e("div",{class:"phone-wrapper",style:{transform:"scale(0.8)"}},[e("div",{class:"phone"},[e("div",{class:"float-ctrl-panel"},[e("a",{class:"page-controller",on:{click:function(e){t.postMessage2Iframe("prev")}}},["上一页"]),e("a",{class:"page-controller",on:{click:function(e){t.postMessage2Iframe("next")}}},["下一页"])]),this.visible&&e("iframe",{attrs:{id:"iframe-for-preview",src:this.releaseUrl,frameborder:"0"},style:"height: 100%;width: 100%;"})])])]),e("a-col",{attrs:{span:12,offset:4}},[e("div",{class:"setting"},[e("div",{class:"info"},[e("h4",{class:"label"},["设置作品信息"]),e("a-input",{class:"input",attrs:{value:this.work.title,placeholder:"请输入标题"},on:{change:function(e){return t.updateWork({title:e.target.value})}}}),e("a-input",{class:"input",attrs:{value:this.work.description,placeholder:"请输入描述",type:"textarea"},on:{change:function(e){return t.updateWork({description:e.target.value})}}})]),e("div",{class:"qrcode my-4"},[e("div",{class:"label"},[e("span",["手机扫码分享给好友"])]),e("div",{class:"code"},[e("canvas",{style:"float: left",attrs:{id:"qrcode-container"}})])]),e("div",{style:"background: #fafafa;"},[e("a-button",{attrs:{type:"link",icon:"link"},on:{click:function(){return t.openNewTab("openPreviewPage")}}},["打开预览页面"]),e("a-button",{attrs:{type:"link",icon:"link"},on:{click:function(){return t.openNewTab("buildEngineDocs")}}},["如果本地预览显示空白，点此查看文档"])])])])])])])}},d=f,h=(n("78c4"),n("2877")),p=Object(h["a"])(d,c,l,!1,null,null,null);t["a"]=p.exports},d6c0:function(e,t,n){var r=n("7bf0").getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,n=r(e),o=145===n?26:2*Math.ceil((n-13)/(2*t-2)),i=[n-7],a=1;a<t-1;a++)i[a]=i[a-1]-o;return i.push(6),i.reverse()},t.getPositions=function(e){for(var n=[],r=t.getRowColCoords(e),o=r.length,i=0;i<o;i++)for(var a=0;a<o;a++)0===i&&0===a||0===i&&a===o-1||i===o-1&&0===a||n.push([r[i],r[a]]);return n}},dd7e:function(e,t,n){var r=n("bbf0");function o(e){this.mode=r.NUMERIC,this.data=e.toString()}o.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);var o=this.data.length-t;o>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*o+1))},e.exports=o},eee5:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}}]);